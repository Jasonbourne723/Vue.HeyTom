{"remainingRequest":"G:\\MyCode\\hey,Tom\\前端vue\\heytom\\node_modules\\babel-loader\\lib\\index.js!G:\\MyCode\\hey,Tom\\前端vue\\heytom\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\MyCode\\hey,Tom\\前端vue\\heytom\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\MyCode\\hey,Tom\\前端vue\\heytom\\src\\views\\GitHubCallBack.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\MyCode\\hey,Tom\\前端vue\\heytom\\src\\views\\GitHubCallBack.vue","mtime":1576750394409},{"path":"G:\\MyCode\\hey,Tom\\前端vue\\heytom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\MyCode\\hey,Tom\\前端vue\\heytom\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\MyCode\\hey,Tom\\前端vue\\heytom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\MyCode\\hey,Tom\\前端vue\\heytom\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KaW1wb3J0IHsgZ2l0aHViQ2FsbEJhY2ssIGdldFVzZXJJbmZvUmVxdWVzdCB9IGZyb20gIi4uL2FwaS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7fTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgcmVxdWVzdENvZGUgPSB0aGlzLiR1dGlscy5nZXRVcmxLZXkoImNvZGUiKTsKICAgIHZhciBwYXJhbSA9IHsKICAgICAgY29kZTogcmVxdWVzdENvZGUKICAgIH07CiAgICB3aW5kb3cuY29uc29sZS5sb2cocGFyYW0pOwogICAgdGhpcy5DYWxsQmFjayhwYXJhbSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBDYWxsQmFjazogZnVuY3Rpb24gQ2FsbEJhY2socGFyYW0pIHsKICAgICAgZ2l0aHViQ2FsbEJhY2socGFyYW0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuSXNTdWNjZXNzKSB7CiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLlRNb2RlbC5Ub2tlbik7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJcdTYyMTBcdTUyOUZcdTgzQjdcdTUzRDZcdTRFRTRcdTcyNENcdUZGMENcdTk4NzlcdTc2RUVcdTUyMURcdTU5Q0JcdTUzMTZcdTRFMkQuLi4iLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLkdldFVzZXJJbmZvKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiAi5o6I5p2D5aSx6LSlIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcykpLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgdGl0bGU6ICLplJnor68iLAogICAgICAgICAgbWVzc2FnZTogIuaXoOazlei/nuaOpeacjeWKoeWZqCIKICAgICAgICB9KTsKICAgICAgfS5iaW5kKHRoaXMpKTsKICAgIH0sCiAgICBHZXRVc2VySW5mbzogZnVuY3Rpb24gR2V0VXNlckluZm8oKSB7CiAgICAgIGdldFVzZXJJbmZvUmVxdWVzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuSXNTdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJcdTgzQjdcdTUzRDZcdTc1MjhcdTYyMzdcdTRGRTFcdTYwNkZcdTYyMTBcdTUyOUYiLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgdXNlckluZm9TdHIgPSBKU09OLnN0cmluZ2lmeShyZXMuVE1vZGVsKTsKICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh1c2VySW5mb1N0cik7CiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJJbmZvIiwgdXNlckluZm9TdHIpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgfS5iaW5kKHRoaXMpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgaWYgKGVyci5yZXNwb25zZSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLojrflj5bnlKjmiLfkv6Hmga/lpLHotKUiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0uYmluZCh0aGlzKSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["GitHubCallBack.vue"],"names":[],"mappings":";;;;AAKA,SAAA,cAAA,EAAA,kBAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA,EAAA;AACA,GAHA;AAIA,EAAA,OAJA,qBAIA;AACA,QAAA,WAAA,GAAA,KAAA,MAAA,CAAA,SAAA,CAAA,MAAA,CAAA;AAEA,QAAA,KAAA,GAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KAAA;AACA,IAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,SAAA,QAAA,CAAA,KAAA;AACA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,KADA,EACA;AACA,MAAA,cAAA,CAAA,KAAA,CAAA,CACA,IADA,CAEA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,SAAA,EAAA;AACA,UAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA;AACA,eAAA,OAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,qFAFA;AAGA,YAAA,QAAA,EAAA;AAHA,WAAA;AAKA,eAAA,WAAA;AACA,SARA,MAQA;AACA,eAAA,QAAA,CAAA,KAAA,CAAA;AACA,YAAA,OAAA,EAAA;AADA,WAAA;AAGA;AACA,OAdA,CAcA,IAdA,CAcA,IAdA,CAFA,EAkBA,KAlBA,CAmBA,YAAA;AACA,aAAA,OAAA,CAAA,KAAA,CAAA;AACA,UAAA,KAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OALA,CAKA,IALA,CAKA,IALA,CAnBA;AA0BA,KA5BA;AA8BA,IAAA,WA9BA,yBA8BA;AACA,MAAA,kBAAA,GACA,IADA,CAEA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,SAAA,EAAA;AACA,eAAA,OAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,oDAFA;AAGA,YAAA,QAAA,EAAA;AAHA,WAAA;AAKA,cAAA,WAAA,GAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,MAAA,CAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA,UAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,WAAA;AACA;;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,OAZA,CAYA,IAZA,CAYA,IAZA,CAFA,EAgBA,KAhBA,CAiBA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,QAAA,EAAA;AACA,eAAA,QAAA,CAAA;AACA,YAAA,OAAA,EAAA,UADA;AAEA,YAAA,IAAA,EAAA;AAFA,WAAA;AAIA;AACA,OAPA,CAOA,IAPA,CAOA,IAPA,CAjBA;AA0BA;AAzDA;AAXA,CAAA","sourcesContent":["<template>\r\n  <div>等待</div>\r\n</template>\r\n\r\n<script>\r\nimport { githubCallBack, getUserInfoRequest } from \"../api/api\";\r\nexport default {\r\n  data() {\r\n    return {};\r\n  },\r\n  created() {\r\n    var requestCode = this.$utils.getUrlKey(\"code\");\r\n\r\n    var param = { code: requestCode };\r\n    window.console.log(param);\r\n    this.CallBack(param);\r\n  },\r\n  methods: {\r\n    CallBack(param) {\r\n      githubCallBack(param)\r\n        .then(\r\n          function(res) {\r\n            if (res.IsSuccess) {\r\n              window.localStorage.setItem(\"token\", res.TModel.Token);\r\n              this.$notify({\r\n                type: \"success\",\r\n                message: `成功获取令牌，项目初始化中...`,\r\n                duration: 2000\r\n              });\r\n              this.GetUserInfo();\r\n            } else {\r\n              this.$message.error({\r\n                message: \"授权失败\"\r\n              });\r\n            }\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function() {\r\n            this.$notify.error({\r\n              title: \"错误\",\r\n              message: \"无法连接服务器\"\r\n            });\r\n          }.bind(this)\r\n        );\r\n    },\r\n\r\n    GetUserInfo() {\r\n      getUserInfoRequest()\r\n        .then(\r\n          function(res) {\r\n            if (res.IsSuccess) {\r\n              this.$notify({\r\n                type: \"success\",\r\n                message: `获取用户信息成功`,\r\n                duration: 2000\r\n              });\r\n              var userInfoStr = JSON.stringify(res.TModel);\r\n              window.console.log(userInfoStr);\r\n              window.localStorage.setItem(\"userInfo\", userInfoStr);\r\n            }\r\n            this.$router.push(\"/\");\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(err) {\r\n            if (err.response) {\r\n              this.$message({\r\n                message: \"获取用户信息失败\",\r\n                type: \"error\"\r\n              });\r\n            }\r\n          }.bind(this)\r\n        );\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/views"}]}